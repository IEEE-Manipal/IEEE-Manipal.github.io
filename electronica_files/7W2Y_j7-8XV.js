if (self.CavalryLogger) { CavalryLogger.start_js(["0eWoT"]); }

__d("ChatReliabilityEvents",[],(function a(b,c,d,e,f,g){f.exports={ERROR:"error",CHANNEL_DISCONNECT:"channel_disconnect",CHANNEL_CONNECT:"channel_connect",CHANNEL_INIT:"channel_init",CHANNEL_NOCONFIG:"channel_noconfig",CHANNEL_HISTORY_INVALID:"channel_history_invalid",CHANNEL_STALLED:"channel_stalled",MESSAGE_RECEIVED:"msg_received",THREAD_INFO_ENDPOINT_FATAL:"thread_info_fatal"};}),null);
__d("ChatSidebarSections",[],(function a(b,c,d,e,f,g){f.exports={ADMINED_PAGES:"admined_pages",MORE_ONLINE_FRIENDS:"more_online_friends",MORE_ONLINE_COWORKERS:"more_online_coworkers",OFFLINE_USERS:"offline_users",ORDERED_LIST:"ordered_list",ORDERED_COWORKERS:"ordered_coworkers",TYPEAHEAD:"typeahead",NOW_PINNED_LIST:"now_pinned_list",NEARBY:"nearby"};}),null);
__d("FunnelRegistry",[],(function a(b,c,d,e,f,g){f.exports={WWW_EXAMPLE_FUNNEL:true,MSITE_EXAMPLE_FUNNEL:true,WWW_FEED_SHARE_DIALOG_FUNNEL:true,MSITE_FEED_SHARE_DIALOG_FUNNEL:true,PLATFORM_SHARE_DIALOG_FUNNEL:true,WWW_RECRUITING_SEARCH_FUNNEL:true,WWW_CANVAS_EDITOR_FUNNEL:true,MSITE_COMMENT_TYPING_FUNNEL:true,MSITE_NOTE_READING_FUNNEL:true,WWW_CAMPFIRE_COMPOSER_UPSELL_FUNNEL:true,WWW_REACTIONS_LIKE_BUTTON_HOVER_FUNNEL:true,WWW_REACTIONS_NUX_FUNNEL:true,WWW_COMMENT_REACTIONS_NUX_FUNNEL:true,MSITE_INLINE_REPLY_COMPOSER_FUNNEL:true,WWW_LEAD_GEN_FORM_CREATION_FUNNEL:true,WWW_LEAD_GEN_DESKTOP_AD_UNIT_FUNNEL:true,WWW_LEAD_GEN_MSITE_AD_UNIT_FUNNEL:true,WWW_LINK_PICKER_DIALOG_FUNNEL:true,WWW_MEME_PICKER_DIALOG_FUNNEL:true,WWW_SNOWLIFT_ACTIONS_FUNNEL:true,WWW_CANVAS_AD_CREATION_FUNNEL:true,WWW_SEARCH_AWARENESS_LEARNING_NUX_FUNNEL:true,WWW_CONSTITUENT_TITLE_UPSELL_FUNNEL:true,WWW_PAGE_CREATION_FUNNEL:true,WWW_VIDEOS_CASTING_FUNNEL:true,MSITE_PPD_FUNNEL:true,WWW_CMS_SEARCH_FUNNEL:true,SOCIAL_SEARCH_CONVERSION_WWW_FUNNEL:true,SOCIAL_SEARCH_DASHBOARD_WWW_FUNNEL:true,GAMES_QUICKSILVER_FUNNEL:true,SRT_USER_FLOW_FUNNEL:true,WWW_MEME_PIVOT_FUNNEL:true,WWW_NOTIFICATION_FUNNEL:true,MSITE_HASHTAG_PROMPT_FUNNEL:true,MSITE_FEED_ALBUM_CTA_FUNNEL:true,MTOUCH_COMMENT_STORIES_FUNNEL:true,WWW_MESSENGER_SHARE_TO_FB_FUNNEL:true,MISINFORMATION_RESHARE_ALERT_FUNNEL:true,FACECAST_BROADCASTER_FUNNEL:true,WWW_MISINFO_WARNING_FOOTER_FUNNEL:true,MTOUCH_MISINFO_WARNING_FOOTER_FUNNEL:true,COLLEGE_COMMUNITY_NUX_ONBOARDING_FUNNEL:true,WWW_ACCESSIBILITY_NOTIFICATIONS_JEWEL_TABBING_FUNNEL:true,MTOUCH_FEED_MISSED_STORIES_FUNNEL:true,WWW_STORYSET_FUNNEL:true,POLYGLOT_MAIN_FUNNEL:true,CREATIVE_STUDIO_CREATION_FUNNEL:true,WWW_LIVE_VIEWER_TIPJAR_FUNNEL:true,WWW_FUNDRAISER_CREATION_FUNNEL:true,WWW_FUNDRAISER_EDIT_FUNNEL:true,WWW_FBL_FUNNEL:true,WWW_CLUE_FUNNEL:true,WWW_OFFERS_SIMPLE_COMPOSE_FUNNEL:true,WWW_OFFERS_SIMPLE_COMPOSE_POST_LIKE_FUNNEL:true};}),null);
__d("SyncRequestStatusEnum",[],(function a(b,c,d,e,f,g){f.exports={PENDING:0,ACCEPTED:1,REJECTED:2,EXPIRED:3,CANCELED:4,namesByValue:["PENDING","ACCEPTED","REJECTED","EXPIRED","CANCELED"]};}),null);
__d('ChatproxyPresence',['Arbiter','AvailableListConstants','AvailableListInitialData','BanzaiODS','ChannelConstants','LastActiveTimes','PresenceStatus','debounceAcrossTransitions','ClientChromeExperimentsData'],(function a(b,c,d,e,f,g){var h=c('ClientChromeExperimentsData').ClientChromeAvailableListInitialDataPreloader;function i(k){var l=k.activeList,m=k.lastActiveTimes;if(l)c('PresenceStatus').setMultiActive(l,'available_list_active');if(m&&!Array.isArray(m))c('LastActiveTimes').update(m);}function j(k){'use strict';this.$ChatproxyPresence1=k;this.$ChatproxyPresence2=false;this.$ChatproxyPresence3=c('AvailableListInitialData').chatNotif;this.$ChatproxyPresence4=false;if(h){h.onLoaded(i);}else i(c('AvailableListInitialData'));}j.prototype.subscribe=function(){'use strict';c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('chatproxy-presence'),this.updatePresenceInfo.bind(this));c('Arbiter').subscribe(c('ChannelConstants').ON_INVALID_HISTORY,function(){this.$ChatproxyPresence2=true;}.bind(this));c('Arbiter').subscribe(c('ChannelConstants').RTI_SESSION,function(k,l){if(l)this.$ChatproxyPresence4=l;}.bind(this));c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('get_debug_presence'),function(k,l){var m=c('PresenceStatus').getAllDebugInfo(),n=c('LastActiveTimes').getDebugData();for(var o in n){var p=m[o];if(p===undefined){p={};m[o]=p;}p.l=Math.floor(n[o]);}this.$ChatproxyPresence4.issueRequest('/debug_presence',{},m,function(){c('BanzaiODS').bumpEntityKey('ChatproxyPresence','debug_presence.sucess');});}.bind(this));};j.prototype.getRTISession=function(){'use strict';return this.$ChatproxyPresence4;};j.prototype.updatePresenceInfo=function(k,l){'use strict';if(this.$ChatproxyPresence2){this.$ChatproxyPresence2=false;c('PresenceStatus').resetPresenceData();}l=l.obj;var m=l.buddyList;c('PresenceStatus').setMultiChatproxy(m);var n=false;if(l.chatNotif!==undefined)n=this.$ChatproxyPresence3!==l.chatNotif;if(n)this.$ChatproxyPresence3=l.chatNotif;if(l.gamers)c('PresenceStatus').setPlayingCanvasGameFriends(l.gamers);if(n)this.$ChatproxyPresence1(c('AvailableListConstants').ON_CHAT_NOTIFICATION_CHANGED,this.$ChatproxyPresence3);c('debounceAcrossTransitions')(function(){this.$ChatproxyPresence1(c('AvailableListConstants').ON_AVAILABILITY_CHANGED);}.bind(this),0)();};j.prototype.getWebChatNotification=function(){'use strict';return this.$ChatproxyPresence3;};f.exports=j;}),null);
__d('ChatReliabilityTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:ChatReliabilityLoggerConfig',this.$ChatReliabilityTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:ChatReliabilityLoggerConfig',this.$ChatReliabilityTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$ChatReliabilityTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$ChatReliabilityTypedLogger1=babelHelpers['extends']({},this.$ChatReliabilityTypedLogger1,j);return this;};h.prototype.setEvent=function(j){this.$ChatReliabilityTypedLogger1.event=j;return this;};h.prototype.setEventData=function(j){this.$ChatReliabilityTypedLogger1.event_data=j;return this;};var i={event:true,event_data:true};f.exports=h;}),null);
__d('ChatReliabilityInstrumentation',['ChatReliabilityEvents','ChatReliabilityTypedLogger','MercuryConfig'],(function a(b,c,d,e,f,g){'use strict';var h=function j(event,k){if(!c('MercuryConfig').EnableReliabilityLogging)return;new (c('ChatReliabilityTypedLogger'))().setEvent(event).setEventData(k).log();},i={logERROR:function j(k){h(c('ChatReliabilityEvents').ERROR,k);},logCHANNEL_DISCONNECT:function j(k){h(c('ChatReliabilityEvents').CHANNEL_DISCONNECT,k);},logCHANNEL_CONNECT:function j(k){h(c('ChatReliabilityEvents').CHANNEL_CONNECT,k);},logCHANNEL_HISTORY_INVALID:function j(k){h(c('ChatReliabilityEvents').CHANNEL_HISTORY_INVALID,k);},logMESSAGE_RECEIVED:function j(k){h(c('ChatReliabilityEvents').MESSAGE_RECEIVED,k);},logCHANNEL_STALLED:function j(k){h(c('ChatReliabilityEvents').CHANNEL_STALLED,k);},logCHANNEL_INIT:function j(k){h(c('ChatReliabilityEvents').CHANNEL_INIT,k);},logCHANNEL_NOCONFIG:function j(k){h(c('ChatReliabilityEvents').CHANNEL_NOCONFIG,k);}};f.exports=i;}),null);
__d('PresenceStatusActionTypes',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';f.exports=c('keyMirror')({AVAILABILITY_CHANGED:null});}),null);
__d("TypingStates",[],(function a(b,c,d,e,f,g){var h={INACTIVE:0,TYPING:1,QUITTING:2};f.exports=h;}),null);
__d('AvailableList',['Arbiter','ArbiterMixin','AsyncRequest','AvailableListConstants','BanzaiODS','Bootloader','ChannelConstants','ChatConfig','ChatDispatcher','ChatproxyPresence','ChatReliabilityInstrumentation','ChatVisibility','CurrentUser','ErrorUtils','JSLogger','LastActiveTimes','PresencePrivacy','PresenceStatus','PresenceStatusActionTypes','Run','ServerTime','TypingStates','debounceAcrossTransitions','emptyFunction','requireWeak'],(function a(b,c,d,e,f,g){'use strict';c('BanzaiODS').setEntitySample('presence',.0001);var h=babelHelpers['extends']({},c('AvailableListConstants'),c('ArbiterMixin')),i=/\D/;h.subscribe([c('AvailableListConstants').ON_AVAILABILITY_CHANGED,c('AvailableListConstants').ON_UPDATE_ERROR],function(q,r){c('Arbiter').inform(q,r);});var j=c('debounceAcrossTransitions')(function(){h.inform(c('AvailableListConstants').ON_AVAILABILITY_CHANGED);c('ChatDispatcher').dispatch({type:c('PresenceStatusActionTypes').AVAILABILITY_CHANGED});},0);function k(q,r,s,t,u){if(q===c('CurrentUser').getID())return;var v=c('PresenceStatus').set(q,r,s,t,u);if(v){var w=c('debounceAcrossTransitions')(function(){h.inform(c('AvailableListConstants').ON_AVAILABILITY_CHANGED,q);c('ChatDispatcher').dispatch({type:c('PresenceStatusActionTypes').AVAILABILITY_CHANGED,id:q});},0);w();}}function l(q){var r=q.payload.availability||{};for(var s in r)k(s&&s.toString(),r[s].a,true,'mercury_tabs',r[s].c);}function m(q){if(!q||i.test(q)){c('ChatReliabilityInstrumentation').logERROR('bad id for available list: '+q);return;}new (c('AsyncRequest'))('/ajax/mercury/tabs_presence.php').setData({target_id:q}).setHandler(l).setErrorHandler(c('emptyFunction')).setAllowCrossPageTransition(true).send();}function n(q,r){r.chat_config=c('ChatConfig').getDebugInfo();r.available_list_debug_info={count:c('PresenceStatus').getOnlineIDs().length};}var o=undefined;try{o=new (c('ChatproxyPresence'))(function(event){h.inform(event);});o.subscribe();}catch(p){c('ErrorUtils').reportError&&c('ErrorUtils').reportError(p,false);c('ChatReliabilityInstrumentation').logERROR(p.getMessage());}Object.assign(h,{getChatproxyPresenceObject:function q(){return o;},get:function q(r){return c('PresenceStatus').get(r);},updateForID:function q(r){m(r);if(c('PresencePrivacy').getVisibility()==c('PresencePrivacy').ONLINE)c('Run').onAfterLoad(function(){return (c('Bootloader').loadModules(["ChannelManager","ChannelTransport"],function(s,t){s.startChannelManager();t.sendAdditionalBuddyRequest(s.getCompleteConfig(),r);},'AvailableList'));});},getWebChatNotification:function q(){return o&&o.getWebChatNotification();},isReady:function q(){return !!o;},set:function q(r,s,t,u){k(r,s,true,t,u);}});c('Arbiter').subscribe(c('JSLogger').DUMP_EVENT,n);c('PresencePrivacy').subscribe(['privacy-changed','privacy-availability-changed','privacy-user-presence-response'],j);c('requireWeak')('ChannelConnection',function(q){return (q.subscribe([q.CONNECTED,q.RECONNECTING,q.SHUTDOWN,q.MUTE_WARNING,q.UNMUTE_WARNING],j));});c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('buddylist_overlay'),function(q,r){var s={},t=r.obj.overlay;for(var u in t){h.set(u,t[u].a,t[u].s||'channel',t[u].vc);if(t[u].la)s[u]=t[u].la;}c('LastActiveTimes').update(s);});c('Arbiter').subscribe([c('ChannelConstants').getArbiterType('typ'),c('ChannelConstants').getArbiterType('ttyp')],function(q,r){var s=r.obj;if(s.st===c('TypingStates').TYPING){var t=s.from;if(c('ChatVisibility').isOnline()){c('BanzaiODS').bumpEntityKey('presence','stale_presence_check_typing');var u=c('PresenceStatus').get(t);if(u!=c('AvailableListConstants').ACTIVE){var v=c('LastActiveTimes').get(t)*1000,w=c('ServerTime').get();if(!v){c('BanzaiODS').bumpEntityKey('presence','no_detailed_presence_typing');}else if(w-v>5*60*1000){var x='stale_presence_typing',y=w-v;if(y<10*60*1000){x+='600';}else if(y<60*60*1000)x+='3600';c('BanzaiODS').bumpEntityKey('presence',x);}}}h.set(t&&t.toString(),c('AvailableListConstants').ACTIVE,'channel-typing');}});c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('messaging'),function(q,r){if(!c('ChatVisibility').isOnline())return;var s=r.obj;if(s.message&&s.message.timestamp&&s.message.sender_fbid){var t=c('ServerTime').get(),u=s.message.timestamp;if(t-u<2*60*1000){c('BanzaiODS').bumpEntityKey('presence','stale_presence_check');var v=s.message.sender_fbid,w=c('PresenceStatus').get(v);if(w==c('AvailableListConstants').ACTIVE)return;var x=c('LastActiveTimes').get(v)*1000;if(!x){c('BanzaiODS').bumpEntityKey('presence','no_detailed_presence');}else if(u-x>5*60*1000){var y='stale_presence',z=u-x;if(z<10*60*1000){y+='600';}else if(z<60*60*1000)y+='3600';c('BanzaiODS').bumpEntityKey('presence',y);}}}});f.exports=h;}),null);
__d('FBRTCStore',['FBRTCDispatcher','FluxStore'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;function j(){i.constructor.call(this,c('FBRTCDispatcher'));}j.prototype.__emitChange=function(){this.__emitter.emit(this.__changeEvent);};f.exports=j;}),null);
__d('FBRTCCallBlockingStore',['Arbiter','AsyncRequest','BanzaiLogger','ChannelConstants','FBRTCDispatcher','FBRTCStore','setTimeoutAcrossTransitions'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=false,k=0,l=null,m='call_block_setting_changed';h=babelHelpers.inherits(n,c('FBRTCStore'));i=h&&h.prototype;n.prototype.init=function(o){this.$FBRTCCallBlockingStore1(o);c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('videocall_block_setting'),this.$FBRTCCallBlockingStore2.bind(this));};n.prototype.__onDispatch=function(o){if(o.type!==m)return;this.$FBRTCCallBlockingStore1(o.data);};n.prototype.$FBRTCCallBlockingStore1=function(o){switch(o){case 0:j=false;this.$FBRTCCallBlockingStore3();break;case -1:j=true;this.$FBRTCCallBlockingStore3();break;default:j=true;this.$FBRTCCallBlockingStore4(o);}this.__emitChange();};n.prototype.$FBRTCCallBlockingStore4=function(o){if(l===null)l=c('setTimeoutAcrossTransitions')(this.turnOnVideoCalling.bind(this),o*1000);};n.prototype.getBlockingStatus=function(){return j;};n.prototype.turnOnVideoCalling=function(){new (c('AsyncRequest'))('/ajax/chat/settings.php').setHandler(this.$FBRTCCallBlockingStore5.bind(this)).setData({call_blocked_until:0}).send();};n.prototype.turnOffVideoCalling=function(o){k=o;new (c('AsyncRequest'))('/ajax/chat/settings.php').setHandler(this.$FBRTCCallBlockingStore6.bind(this)).setData({call_blocked_until:o}).send();};n.prototype.$FBRTCCallBlockingStore3=function(){if(l){clearTimeout(l);l=null;}};n.prototype.$FBRTCCallBlockingStore5=function(){c('FBRTCDispatcher').dispatch({type:m,data:0});c('BanzaiLogger').log('VideoCallLoggerConfig',{event:m,message:'enable'});};n.prototype.$FBRTCCallBlockingStore6=function(){c('FBRTCDispatcher').dispatch({type:m,data:k});c('BanzaiLogger').log('VideoCallLoggerConfig',{event:m,message:'disable_'+k});};n.prototype.$FBRTCCallBlockingStore2=function(o,p){c('FBRTCDispatcher').dispatch({type:m,data:p.obj.value});};function n(){h.apply(this,arguments);}f.exports=new n();}),null);
__d('ChatOptions',['Arbiter','ChannelConstants','ChatSidebarActions','ChatSidebarVisibility','FBRTCCallBlockingStore','JSLogger','PresenceUtil','SidebarType','ChatOptionsInitialData'],(function a(b,c,d,e,f,g){var h=c('JSLogger').create('chat_options'),i={};(function(){var k=c('ChatOptionsInitialData');for(var l in k){var m=k[l];if(l==='call_blocked_until'){c('FBRTCCallBlockingStore').init(m);}else i[l]=!!m;}})();var j=Object.assign(new (c('Arbiter'))(),{getSetting:function k(l){return i[l];},setSetting:function k(l,m,n){if(l==='sidebar_mode'){c('ChatSidebarVisibility').shouldShowSidebarIgnoreEnabled(null,function(o,p){if(m){c('ChatSidebarActions').enable(o?c('SidebarType').SIDEBAR:c('SidebarType').BUDDYLIST);}else c('ChatSidebarActions').disable();});return;}if(this.getSetting(l)==m)return;if(n){n='from_'+n;h.log(n,{name:l,new_value:m,old_value:this.getSetting(l)});}i[l]=!!m;c('Arbiter').inform('chat/option-changed',{name:l,value:m});}});c('Arbiter').subscribe(c('ChannelConstants').getArbiterType('setting'),function(k,l){var m=l.obj;if(m.window_id===c('PresenceUtil').getSessionID())return;j.setSetting(m.setting,!!m.value,'channel');});c('Arbiter').subscribe(c('JSLogger').DUMP_EVENT,function(k,l){l.chat_options=i;});f.exports=j;}),null);
__d('ChatQuietLinks',['DataStore','DOM','Event','Parent','UserAgent_DEPRECATED','getOrCreateDOMID'],(function a(b,c,d,e,f,g){var h={},i={silenceLinks:function m(n){j(n,this.removeEmptyHrefs.bind(this));},nukeLinks:function m(n){j(n,this.removeAllHrefs.bind(this));},removeEmptyHrefs:function m(n){k(n,function(o){return !o||o==='#';});},removeAllHrefs:function m(n){k(n);}};function j(m,n){var o=!!c('UserAgent_DEPRECATED').chrome(),p=!!c('UserAgent_DEPRECATED').chrome()||c('UserAgent_DEPRECATED').ie()>=9||c('UserAgent_DEPRECATED').firefox()>=4;if(h[c('getOrCreateDOMID')(m)])return;h[c('getOrCreateDOMID')(m)]=true;if(!p)return;if(!o){n&&n(m);return;}c('Event').listen(m,'mouseover',function q(r){var s=c('Parent').byTag(r.getTarget(),'a');if(s){var t=s.getAttribute('href');if(l(t)){c('DataStore').set(s,'stashedHref',s.getAttribute('href'));s.removeAttribute('href');}}});c('Event').listen(m,'mouseout',function q(r){var s=c('Parent').byTag(r.getTarget(),'a'),t=s&&c('DataStore').remove(s,'stashedHref');if(l(t))s.setAttribute('href',t);});c('Event').listen(m,'mousedown',function(q){if(!q.isDefaultRequested())return true;var r=c('Parent').byTag(q.getTarget(),'a'),s=r&&c('DataStore').get(r,'stashedHref');if(l(s))r.setAttribute('href',s);});}function k(m,n){var o=c('DOM').scry(m,'a');if(n)o=o.filter(function(p){return n(p.getAttribute('href'));});o.forEach(function(p){p.removeAttribute('href');if(!p.tabIndex)p.setAttribute('tabindex',0);});}function l(m){return m&&m!=='#';}f.exports=i;}),null);
__d('ChatUnreadCountActionTypes',['keyMirror'],(function a(b,c,d,e,f,g){'use strict';f.exports=c('keyMirror')({COUNT_UPDATED:null});}),null);
__d('BlueBarFixedBehaviorController',['Arbiter','Bootloader'],(function a(b,c,d,e,f,g){f.exports={init:function h(i){if(!('getBoundingClientRect' in i))return;var j=void 0,k=document.documentElement;function l(){var m=i.getBoundingClientRect(),n=m.top,o=Math.round(n)-k.clientTop<=0;if(j!==o){j=o;c('Arbiter').inform('bluebarFixedBehaviorController/isfixed',j,c('Arbiter').BEHAVIOR_STATE);}}l();c('Bootloader').loadModules(["Event"],function(m){m.listen(window,'scroll',l);},'BlueBarFixedBehaviorController');}};}),null);
__d('FunnelAction',[],(function a(b,c,d,e,f,g){'use strict';var h='name',i='payload',j='relative_time',k='tag';function l(m,n,o,p){this.$FunnelAction1={};this.$FunnelAction1[h]=m;this.$FunnelAction1[j]=n;if(o!==undefined)this.$FunnelAction1[k]=o;if(p!==undefined)this.$FunnelAction1[i]=JSON.stringify(p);}l.prototype.getData=function(){return this.$FunnelAction1;};f.exports=l;}),null);
__d('Funnel',['invariant','FunnelAction','FunnelRegistry','sprintf'],(function a(b,c,d,e,f,g,h){'use strict';var i='name',j='instance_id',k='start_time',l='tags',m='actions',n='sampling_rate',o='timeout_sec',p={EXPLICIT:'explicit',TIMEOUT:'timeout',SESSION_END:'session_end',RESTART:'restart',ACTIONS_FULL:'actions_full'},q={ACTION_END:'funnel_end',ACTION_WINDOW_BLUR:'window_blur',ACTION_WINDOW_FOCUS:'window_focus'},r=600;function s(t,u,v,w){c('FunnelRegistry')[t]===true||h(0);this.$Funnel1=t;this.$Funnel2=u;this.$Funnel3=[];this.$Funnel4={};this.$Funnel5=v;this.$Funnel6=Date.now();this.timeout_sec=r;this.shouldTrackFocus=false;this.$Funnel7=w;this.devModeLogger('Started funnel');}s.prototype.addTag=function(t){typeof t==='string'||h(0);this.$Funnel4[t]=true;this.devModeLogger('Added funnel tag %s',t);return this;};s.prototype.appendAction=function(t,u,v){this.$Funnel3.push(new (c('FunnelAction'))(t,Date.now()-this.$Funnel6,u,v));if(u){this.devModeLogger('Appended action %s with tag %s',t,u);}else this.devModeLogger('Appended action %s',t);this.$Funnel8=t;return this;};s.prototype.appendActionIfNew=function(t,u,v){if(t!==this.$Funnel8)this.appendAction(t,u,v);return this;};s.prototype.getLogData=function(){var t={};t[i]=this.$Funnel1;if(this.$Funnel2!==undefined){t[j]=this.$Funnel2;}else t[j]=Math.floor(Math.random()*65536);t[k]=this.$Funnel6;t[n]=this.$Funnel5;t[o]=this.timeout_sec;t[l]=[];for(var u in this.$Funnel4)if(this.$Funnel4[u]===true)t[l].push(u);if(this.$Funnel3.length>0){t[m]=[];for(var v=0;v<this.$Funnel3.length;v++)t[m].push(this.$Funnel3[v].getData());}return t;};s.prototype.devModeLogger=function(){};s.prototype.getTags=function(){return this.$Funnel4;};f.exports={Funnel:s,EndType:p,ActionType:q};}),null);
__d('FunnelLoggerSampler',['FunnelLoggerConfig'],(function a(b,c,d,e,f,g){'use strict';function h(j){var k=i(j);if(k===0)return false;return Math.random()*k<1;}function i(j){var k=c('FunnelLoggerConfig').freq[j];if(k===undefined)k=c('FunnelLoggerConfig').freq['default'];return k;}f.exports={shouldLog:h,getSamplingRate:i};}),null);
__d('FunnelLogger',['invariant','Banzai','Funnel','FunnelRegistry','FunnelLoggerSampler','MarauderLogger'],(function a(b,c,d,e,f,g,h){'use strict';var i={},j=false,k=true;function l(qa,ra){var sa=ba(qa,ra);pa();ka(sa);if(c('FunnelLoggerSampler').shouldLog(qa)){i[sa]=new (c('Funnel').Funnel)(qa,ra,c('FunnelLoggerSampler').getSamplingRate(qa),false);ea(sa);}}function m(qa,ra){var sa=ba(qa,ra);if(!ca(sa))return null;return i[sa];}function n(qa,ra){}function o(qa,ra,sa){if(sa===undefined){da(qa,undefined,ra);}else if(sa)da(qa,ra,sa);}function p(qa,ra){var sa=ba(qa,ra);if(ca(sa)){i[sa].devModeLogger('Cancelled funnel');fa(sa);i[sa]=undefined;}}function q(qa,ra){var sa=ba(qa,ra);if(ca(sa)){i[sa].appendAction(c('Funnel').ActionType.ACTION_END,c('Funnel').EndType.EXPLICIT);la(sa);}}function r(qa,ra,sa){if(sa===undefined){ga(qa,undefined,String(ra));}else ga(qa,Number(ra),sa);}function s(qa,ra,sa){if(sa===undefined){ha(qa,undefined,Boolean(ra));}else ha(qa,Number(ra),sa);}function t(qa,ra,sa){if(sa===undefined){ia(qa,undefined,String(ra),undefined);}else ia(qa,Number(ra),sa,undefined);}function u(qa,ra,sa){if(sa===undefined){ja(qa,undefined,String(ra),undefined);}else ja(qa,Number(ra),sa,undefined);}function v(qa,ra,sa,ta){if(ta===undefined){ia(qa,undefined,String(ra),sa);}else ia(qa,Number(ra),sa,ta);}function w(qa,ra,sa,ta){if(ta===undefined){ja(qa,undefined,String(ra),sa);}else ja(qa,Number(ra),sa,ta);}function x(qa,ra,sa,ta){if(ta===undefined){ia(qa,undefined,String(ra),undefined,sa);}else ia(qa,Number(ra),String(sa),undefined,ta);}function y(qa,ra,sa,ta){if(ta===undefined){ja(qa,undefined,String(ra),undefined,sa);}else ja(qa,Number(ra),String(sa),undefined,ta);}function z(qa,ra,sa,ta,ua){if(ua===undefined){ia(qa,undefined,String(ra),sa,ta);}else ia(qa,Number(ra),String(sa),String(ta),ua);}function aa(qa,ra,sa,ta,ua){if(ua===undefined){ja(qa,undefined,String(ra),sa,ta);}else ja(qa,Number(ra),String(sa),String(ta),ua);}function ba(qa,ra){c('FunnelRegistry')[qa]===true||h(0);if(ra===undefined||ra===null){return qa;}else return qa+ra.toString();}function ca(qa){return i[qa]!==undefined;}function da(qa,ra,sa){var ta=ba(qa,ra);if(ca(ta)){i[ta].timeout_sec=sa;i[ta].devModeLogger('Timeout set to %d sec',sa);ea(ta);}}function ea(qa){fa(qa);i[qa].timeout_handle=setTimeout(function(){i[qa].appendAction(c('Funnel').ActionType.ACTION_END,c('Funnel').EndType.TIMEOUT);la(qa);},1000*i[qa].timeout_sec);}function fa(qa){if(i[qa].timeout_handle)clearTimeout(i[qa].timeout_handle);}function ga(qa,ra,sa){var ta=ba(qa,ra);if(ca(ta)){i[ta].addTag(sa);ea(ta);}}function ha(qa,ra,sa){var ta=ba(qa,ra);if(ca(ta)){i[ta].shouldTrackFocus=sa;i[ta].devModeLogger('Focus tracking %s',sa?'on':'off');}}function ia(qa,ra,sa,ta,ua){var va=ba(qa,ra);if(ca(va)){i[va].appendAction(sa,ta,ua);ea(va);}}function ja(qa,ra,sa,ta,ua){var va=ba(qa,ra);if(ca(va))i[va].appendActionIfNew(sa,ta,ua);}function ka(qa){if(ca(qa)){i[qa].appendAction(c('Funnel').ActionType.ACTION_END,c('Funnel').EndType.RESTART);la(qa);}}function la(qa){if(ca(qa)){var ra=i[qa].getLogData();c('MarauderLogger').log('funnel_analytics',null,ra);i[qa].devModeLogger('Logged: %s',JSON.stringify(ra));fa(qa);i[qa]=undefined;}}function ma(){for(var qa in i)if(Object.prototype.hasOwnProperty.call(i,qa)&&ca(qa)){i[qa].appendAction(c('Funnel').ActionType.ACTION_END,c('Funnel').EndType.SESSION_END);la(qa);}}function na(){if(k){k=false;for(var qa in i)if(Object.prototype.hasOwnProperty.call(i,qa)&&ca(qa)&&i[qa].shouldTrackFocus){i[qa].appendAction(c('Funnel').ActionType.ACTION_WINDOW_BLUR);fa(qa);}}}function oa(){if(!k){k=true;for(var qa in i)if(Object.prototype.hasOwnProperty.call(i,qa)&&ca(qa)&&i[qa].shouldTrackFocus){i[qa].appendAction(c('Funnel').ActionType.ACTION_WINDOW_FOCUS);fa(qa);}}}function pa(){if(!j){j=true;if(window.addEventListener){c('Banzai').subscribe(c('Banzai').SHUTDOWN,ma);window.addEventListener('blur',na);window.addEventListener('focus',oa);}}}f.exports={startFunnel:l,startFunnel_DEV_MODE:n,setFunnelTimeout:o,setFunnelTrackFocus:s,addFunnelTag:r,appendAction:t,appendActionIfNew:u,appendActionWithTag:v,appendActionWithTagIfNew:w,appendActionWithPayload:x,appendActionWithPayloadIfNew:y,appendActionWithTagAndPayload:z,appendActionWithTagAndPayloadIfNew:aa,cancelFunnel:p,endFunnel:q,getFunnelInstance:m};}),null);
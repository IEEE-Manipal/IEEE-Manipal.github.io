if (self.CavalryLogger) { CavalryLogger.start_js(["sPOzl"]); }

__d("TrendingEvent",[],(function a(b,c,d,e,f,g){f.exports={TAG_IMPRESSION:"tag_impression",TAG_FEED_LOAD:"tag_feed_load",TAG_FEED_LONG_VIEW:"tag_feed_long_view",TAG_HIDE:"tag_hide",TOPIC_HEADER_TAPPED:"topic_header_tapped",HOVERCARD_LOAD:"hovercard_load",HOVERCARD_UNLOAD:"hovercard_unload",HOVERCARD_ARTICLE_CLICK:"hovercard_article_click",HOVERCARD_FEED_CLICK:"hovercard_feed_click",HOVERCARD_CONTEXT_CLICK:"hovercard_context_click",OBJECT_CLICK:"object_click",OBJECT_OUTBOUND_CLICK:"object_outbound_click",OBJECT_LIKE:"object_like",OBJECT_COMMENT:"object_comment",OBJECT_SHARE:"object_share",OBJECT_PAGE_LIKE:"object_page_like",OBJECT_FOLLOW:"object_follow",OBJECT_HIDE:"object_hide",PAGINATE:"paginate",TOPIC_SHARE:"topic_share",CATEGORY_HEADER_CLICKED:"category_header_clicked",HOVERCARD_VIDEO_PLAYED:"hovercard_video_played",CLICK_TAG_IMPRESSION:"click_tag_impression"};}),null);
__d("TrendingLocation",[],(function a(b,c,d,e,f,g){f.exports={FBFEED_TOPIC_PIVOT:"ftp",FBFEED_TRENDING_TOPIC_PIVOT:"fttp",IOS_TRENDING_DASHBOARD_IN_BOOKMARK:"ios_trending_dashboard_in_bookmark",IOS_TRENDING_INTERSTITIAL:"ios_trending_interstitial",MSITE_PERMALINK:"mp",MSITE_QP:"mq",MSITE_HASHTAG_REDIRECTION:"mhr",MSITE_CARD_PIVOT:"mcp",MSITE_FEED_TOPIC_PIVOT:"mftp",MSITE_FEED_TRENDING_TOPIC_PIVOT:"mfttp",MSITE_NEWS_DASHBOARD:"mnd",MSITE_NEWS_MODULE:"mnm",MSITE_LIVE_EVENT:"mle",MSITE_PAGE_REDIRECTION:"mpr",MSITE_RELATED_TOPICS:"mrt",MSITE_ADS:"ma",MSITE_SEARCH_SPORT_MATCH_MODULE:"mssmm",WEB_FEED_TOPIC_PIVOT:"wftp",WEB_FEED_TRENDING_TOPIC_PIVOT:"wfttp",OLD_FEED_TOPIC_PIVOT:"oftp",OLD_FEED_TRENDING_TOPIC_PIVOT:"ofttp",WWW_PERMALINK:"wp",WWW_QP:"wq",WWW_HASHTAG_REDIRECTION:"whr",WWW_HIDDEN_RHC_TRENDING:"whrt",WWW_HOME_FEED_RHC_TRENDING:"whfrt",WWW_HOME_FEED_RHC_TRENDING_PLACES:"whfrtp",WWW_POST_LIKE_TOPIC_CHAINING:"wpltc",WWW_TOPIC_FEED_RHC_TRENDING:"wtfrt",WWW_POST_SEARCH_RHC_TRENDING:"wpsrt",WWW_PAGE_FEED_RHC_TRENDING:"wpfrt",WWW_BROWSE_RHC_TRENDING:"wbrt",WWW_BROWSE_LATEST_POSTS_TAB:"wblpt",WWW_WORLDCUP_RHC_TRENDING:"wwcrt",WWW_LIVE_EVENT:"wle",WWW_PAGE_REDIRECTION:"wpr",WWW_ADS:"wa",WWW_SEARCH_SPORT_MATCH_MODULE:"wssmm",WWW_NEWS:"wnews",UNKNOWN:"unknown",FBFEED_SENTIMENT_UNIT_PIVOT:"fsup",IOS_SIDEFEED:"ios_sidefeed",IOS_NEWS_FEED:"ios_news_feed",MTOUCH_NEWS_FEED:"mtouch_news_feed",ANDROID_NULL_STATE:"android_null_state",IOS_GRAPH_SEARCH_NULL_STATE:"ios_graph_search_null_state",MSITE_NEWS_NON_GS_NULL_STATE:"mnngns",MSITE_NEWS_NULL_STATE:"mnns",MSITE_LATEST_POSTS_TAB:"mlpt",WWW_NULL_STATE:"www_null_state",SEARCH_TRENDING_MODULE:"stm",IOS_TODAY_MAIN:"ios_today_main",IOS_TODAY_SEE_MORE:"ios_today_see_more",IOS_STORY_TOPIC_HEADER:"ios_story_topic_header",TOPIC_SHARE:"share",TOPIC_MOBILE_SHARE:"mobile_share"};}),null);
__d('TrendingRHCLogger',['csx','cx','AsyncSignal','BanzaiScuba','CSS','Event','Parent','Run','TrendingRHCConfig'],(function a(b,c,d,e,f,g,h,i){var j,k,l,m,n,o,p,q,r=3,s=false;function t(y,z,aa,ba){var ca=new (c('BanzaiScuba'))('trending_rhc',null,{sampleRate:c('TrendingRHCConfig').sample_rate});ca.addNormal('country',n);ca.addNormal('post_search_trending_feeds',c('TrendingRHCConfig').post_search_trending_feeds);ca.addNormal('event',z);ca.addNormal('position',y);ca.addNormal('qe_group',k);var da=y<=r?l:q;ca.addNormal('source',da);ca.addNormVector('categories',aa);ca.addNormal('topic_id',ba);ca.post();}function u(y,z){var aa=y.getAttribute('data-position');if(!aa)return;var ba=y.getAttribute('data-categories'),ca=ba?JSON.parse(ba):[],da=y.getAttribute('data-topicid');t(aa,z,ca,da);}function v(event){var y=null,z=event.getTarget(),aa=c('Parent').bySelector(event.getTarget(),"._2w2e");if(aa){z=aa;}else if(!c('CSS').matchesSelector(z,"._5my2")){y=c('Parent').bySelector(z,"._4_nl");z=c('Parent').bySelector(z,"._5my2");}if(!z||y||c('CSS').matchesSelector(event.getTarget(),"._19_3")||c('CSS').matchesSelector(event.getTarget(),"._4v8h"))return;u(z,'click');var ba=z.getAttribute('data-position');if(ba==='seemore'||ba==='trendingheader')s=true;}function w(){if(!j)return;new (c('AsyncSignal'))('/ajax/pubcontent/trending_rhc/log_hidden',{keys:JSON.stringify(j),source:q,scores:JSON.stringify(o),query_id:p}).send();j=null;}var x={init:function y(z,aa){l=aa.source;k=aa.qe_group;n=aa.country;j=aa.hidden_keys;m=aa.query_id;o=aa.hidden_scores;var ba=c('Event').listen(z,'click',v);c('Run').onLeave(function(){ba.remove();});},initSeeMore:function y(z,aa,ba,ca,da){j=aa;o=ba;p=ca;q=da;var ea=c('Event').listen(z,'click',v);if(s){w();}else s=false;c('Run').onLeave(function(){ea.remove();});},logHovercardArticleClick:function y(z,aa){t(z,'hover_article_click',null,aa);},logHovercardFeedClick:function y(z,aa){t(z,'hover_feed_click',null,aa);},logHovercardShare:function y(z,aa){t(z,'topic_share',null,aa);},logImpression:function y(z){u(z,'imp');},getSource:function y(){return l;},getQueryID:function y(){return m;},getSeeMoreSource:function y(){return q;},getSeeMoreQueryID:function y(){return p;}};f.exports=x;}),null);
__d('TrendingHideReasons',['fbt','immutable'],(function a(b,c,d,e,f,g,h){var i=c('immutable').OrderedMap,j=i({5:h._("I want to see something else"),1:h._("I don't care about this"),2:h._("I keep seeing this"),3:h._("It's offensive or inappropriate"),4:h._("Other")});f.exports=j;}),null);
__d('TrendingTopicHideMenu.react',['cx','ix','fbt','Image.react','ImageBlock.react','InputLabel.react','LeftRight.react','Link.react','React','TrendingHideReasons','XUIRadioInput.react','XUIText.react'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=c('React').PropTypes;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){var o=this.props.suppressXOutReasons?c('React').createElement('div',null):c('React').createElement('div',null,this.$TrendingTopicHideMenu1(),this.$TrendingTopicHideMenu2());return (c('React').createElement(c('ImageBlock.react'),{className:"_4_nl",spacing:'none'},c('React').createElement(c('Image.react'),{className:"_19_0",src:i("97459")}),c('React').createElement('div',null,this.$TrendingTopicHideMenu3(),o)));};n.prototype.$TrendingTopicHideMenu3=function(){return (c('React').createElement(c('LeftRight.react'),null,c('React').createElement(c('XUIText.react'),{weight:'bold'},j._("Topic Hidden")),c('React').createElement(c('Link.react'),{className:"_4_nn"},j._("Undo"))));};n.prototype.$TrendingTopicHideMenu1=function(){return (c('React').createElement('div',{className:"_3-95"},j._("We'll try not to show you this topic again.")));};n.prototype.$TrendingTopicHideMenu2=function(){return (c('React').createElement('form',{action:'#',className:"_3-94"},c('React').createElement('div',{className:"_3-94"},j._("Why did you hide it?")),c('TrendingHideReasons').map(function(o,p){return (c('React').createElement(c('InputLabel.react'),{key:p},c('React').createElement(c('XUIRadioInput.react'),{className:"_2p3m",name:'trending_hide_reason',value:p,'data-topicid':this.props.topicId}),c('React').createElement('label',null,o)));}.bind(this)).toArray()));};function n(){k.apply(this,arguments);}n.propTypes={topicId:m.number.isRequired,category:m.number.isRequired,suppressXOutReasons:m.bool.isRequired};f.exports=n;}),null);
__d("TrendingCategoriesIconUnitCallback",[],(function a(b,c,d,e,f,g){var h=null,i={register:function j(k){h=k;},callback:function j(k,l){h.setCategoryList(k,l);}};f.exports=i;}),null);
__d("XPubcontentTrendingCategoriesFetchListController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/trending\/categories\/fetch_list\/",{category:{type:"Enum",required:true,enumType:0},source:{type:"String",required:true},topic_ids_seen:{type:"IntVector",required:true}});}),null);
__d("XPubcontentTrendingReplaceTrendsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/trending\/trending_unit\/",{is_expanded:{type:"Bool",defaultValue:false}});}),null);
__d('TrendingCategoriesIconUnit',['AsyncRequest','CSS','Event','Style','TrendingCategoriesIconUnitCallback','XPubcontentTrendingCategoriesFetchListController','XPubcontentTrendingReplaceTrendsController','enumerate','tidyEvent'],(function a(b,c,d,e,f,g){function h(i){'use strict';this.$TrendingCategoriesIconUnit1=i.categoryIconMap;this.$TrendingCategoriesIconUnit2=i.categoryListMap;this.$TrendingCategoriesIconUnit3=i.categoryHeaderMap;this.$TrendingCategoriesIconUnit4=i.loadingBar;this.$TrendingCategoriesIconUnit5=i.selectedCategoryId;this.$TrendingCategoriesIconUnit6=i.selectedCategoryId;this.$TrendingCategoriesIconUnit7=i.source;this.$TrendingCategoriesIconUnit8=i.enableIconSeeMore;this.$TrendingCategoriesIconUnit9=[];var j=this.$TrendingCategoriesIconUnit2[this.$TrendingCategoriesIconUnit5];this.$TrendingCategoriesIconUnit10=j?j.getHeight():0;c('TrendingCategoriesIconUnitCallback').register(this);for(var k=c('enumerate')(this.$TrendingCategoriesIconUnit1),l=Array.isArray(k),m=0,k=l?k:k[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var n;if(l){if(m>=k.length)break;n=k[m++];}else{m=k.next();if(m.done)break;n=m.value;}var o=n,p=o[1];this.$TrendingCategoriesIconUnit11(p);}this.$TrendingCategoriesIconUnit12(i.refreshSeconds,i.isExpanded);}h.prototype.setCategoryList=function(i,j){'use strict';this.$TrendingCategoriesIconUnit2[j]=i;if(j===this.$TrendingCategoriesIconUnit5){if(this.$TrendingCategoriesIconUnit4)c('CSS').hide(this.$TrendingCategoriesIconUnit4);this.$TrendingCategoriesIconUnit2[j].showItems();this.$TrendingCategoriesIconUnit10=this.$TrendingCategoriesIconUnit2[j].getHeight();}};h.prototype.$TrendingCategoriesIconUnit11=function(i){'use strict';var j=i.getCategoryId();c('tidyEvent')(c('Event').listen(i.getRoot(),'click',function(event){var k=j===this.$TrendingCategoriesIconUnit6&&this.$TrendingCategoriesIconUnit8;if(k){if(j===this.$TrendingCategoriesIconUnit5)return;this.$TrendingCategoriesIconUnit2[j].fetchExtraItems();}if(j===this.$TrendingCategoriesIconUnit5)return;this.$TrendingCategoriesIconUnit1[this.$TrendingCategoriesIconUnit5].unselect();if(this.$TrendingCategoriesIconUnit2[this.$TrendingCategoriesIconUnit5]){this.$TrendingCategoriesIconUnit10=this.$TrendingCategoriesIconUnit2[this.$TrendingCategoriesIconUnit5].getHeight();this.$TrendingCategoriesIconUnit2[this.$TrendingCategoriesIconUnit5].hideItems();}this.$TrendingCategoriesIconUnit1[j].select();this.$TrendingCategoriesIconUnit5=j;if(this.$TrendingCategoriesIconUnit2[j]){if(this.$TrendingCategoriesIconUnit4)c('CSS').hide(this.$TrendingCategoriesIconUnit4);this.$TrendingCategoriesIconUnit2[j].showItems();this.$TrendingCategoriesIconUnit10=this.$TrendingCategoriesIconUnit2[j].getHeight();return;}c('Style').set(this.$TrendingCategoriesIconUnit4,'height',String(this.$TrendingCategoriesIconUnit10));c('CSS').show(this.$TrendingCategoriesIconUnit4);if(this.$TrendingCategoriesIconUnit9[j])return;this.$TrendingCategoriesIconUnit9[j]=true;var l=this.$TrendingCategoriesIconUnit2[this.$TrendingCategoriesIconUnit6],m=l.getCategoryItemInfo(),n=c('XPubcontentTrendingCategoriesFetchListController').getURIBuilder().setEnum('category',j).setString('source',this.$TrendingCategoriesIconUnit7).setIntVector('topic_ids_seen',m.visibleTopicIds).getURI();new (c('AsyncRequest'))().setURI(n).send();}.bind(this)));};h.prototype.$TrendingCategoriesIconUnit12=function(i,j){'use strict';var k=i*1000;setTimeout(function(){var l=c('XPubcontentTrendingReplaceTrendsController').getURIBuilder().setBool('is_expanded',j).getURI();new (c('AsyncRequest'))(l).send();},k);};f.exports=h;}),null);
__d("XPubcontentTrendingCategoriesInsertItemController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/trending\/categories\/hide_options\/",{num_removed_topics:{type:"Int",defaultValue:0},trending_topic_id:{type:"Int",required:true},topic_ids:{type:"IntVector",defaultValue:[]},category:{type:"Enum",required:true,enumType:0}});}),null);
__d("XPubcontentTrendingHideConfirmController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/trending\/hide_confirm\/",{hidden_topic_id:{type:"Int",required:true},position:{type:"Int",defaultValue:0},reason:{type:"Int",required:true},source:{type:"String"},trqid:{type:"Int",defaultValue:-1}});}),null);
__d('TrendingCategoriesRHCHide',['csx','cx','AsyncRequest','CSS','DOM','DOMQuery','Event','immutable','Parent','React','ReactDOM','TrendingRHCLogger','TrendingTopicHideMenu.react','URI','XPubcontentTrendingCategoriesInsertItemController','XPubcontentTrendingHideConfirmController','tidyEvent'],(function a(b,c,d,e,f,g,h,i){'use strict';var j=[],k=[],l=false,m=c('immutable').Map([]),n=['webkitAnimationEnd','animationend','mozAnimationEnd','oAnimationEnd','MSAnimationEnd'];function o(r,s){var t=c('DOMQuery').scry(r,"._5my2"),u=t.filter(function(w){var x=Number(w.getAttribute('data-position'));return x>=s;}),v=[];u.forEach(function(w){var x=Number(w.getAttribute('data-position'));w.setAttribute('data-position',x-1);var y=c('DOMQuery').scry(w,"._7ge");y.forEach(function(z){var aa=new (c('URI'))(z.getAttribute('href')).addQueryData('position',x-1);v.push({link:z,uri:aa.toString()});});});v.forEach(function(w){var x=w.link;x.setAttribute('href',w.uri);});}function p(r,s,t){var u,v=arguments.length<=3||arguments[3]===undefined?false:arguments[3],w=c('DOMQuery').find(r,"^._2snq"),x=c('DOMQuery').find(r,"^._5my2"),y=v?"_y-h":"_4_nj",z=c('DOM').create('div',{className:y}),aa=Number(x.getAttribute('data-position'));if(v){(function(){var fa=m.get(t);if(fa==null){m=m.set(t,c('immutable').Map([]));fa=m.get(t);}var ga=fa.get(s),ha=setTimeout(function(){o(w,aa);j[t].removeItem(x);c('DOM').insertBefore(x,z);n.forEach(function(event){z.addEventListener(event,function(){c('CSS').removeClass(z,"_y-h");});});},3000),ia=c('DOM').scry(r,"._4_nn")[0];if(ia!=null)c('tidyEvent')(c('Event').listen(ia,'click',function(){clearTimeout(ha);}));if(!ga){j[t].showExtraItem();var ja=fa.set(s,true);m=m.set(t,ja);}})();}else{o(w,aa);j[t].showExtraItem();j[t].removeItem(x);c('DOM').insertBefore(x,z);n.forEach(function(event){z.addEventListener(event,function(){c('CSS').removeClass(z,"_4_nj");});});}var ba=void 0,ca=r.firstChild;if(ca==null||!(ca instanceof HTMLInputElement)){if(v){ba=6;}else return;}else ba=ca.value;var da=c('XPubcontentTrendingHideConfirmController').getURIBuilder().setInt('reason',ba).setInt('hidden_topic_id',s).setInt('position',aa);if(c('TrendingRHCLogger').getSource())da.setString('source',c('TrendingRHCLogger').getSource());if(c('TrendingRHCLogger').getQueryID())da.setInt('trqid',c('TrendingRHCLogger').getQueryID());var ea=da.getURI();new (c('AsyncRequest'))().setURI(ea).setRelativeTo(r).send();}var q={addCategoryList:function r(s,t){j[t]=s;},confirmHide:function r(s,t,u){var v=false;c('tidyEvent')(c('Event').listen(s,'click',function(){setTimeout(function(){if(v)return;v=true;p(s,t,u);},100);}));},onHideReasonClicked:function r(s,t){var u=c('DOMQuery').find(s,'input[name="trending_hide_reason"]'),v=parseInt(u.getAttribute('data-topicid'),10);if(k[v])return;k[v]=true;setTimeout(function(){p(s,v,t);k[v]=false;},100);},onHideClicked:function r(s,t){var u=arguments.length<=2||arguments[2]===undefined?false:arguments[2],v=parseInt(s.getAttribute('data-topicid'),10),w=c('DOMQuery').find(s,"^._5my2"),x=c('DOM').scry(w,"._4_nl")[0],y=c('DOMQuery').find(w,"._4_nm");c('CSS').hide(y);if(x!=null){c('CSS').show(x);}else{var z=c('DOM').create('div');c('ReactDOM').render(c('React').createElement(c('TrendingTopicHideMenu.react'),{topicId:v,category:t,suppressXOutReasons:u}),z);c('DOM').appendContent(w,z);}if(!l){if(j[t]==null)return;l=true;var aa=j[t].getCategoryItemInfo(),ba=aa.visibleTopicIds.concat(aa.hiddenTopicIds,aa.removedTopicIds),ca=aa.removedTopicIds.length;if(u){var da=c('DOM').scry(w,"._4_nl")[0];if(da instanceof HTMLElement)p(da,v,t,u);}var ea=c('XPubcontentTrendingCategoriesInsertItemController').getURIBuilder().setInt('trending_topic_id',v).setIntVector('topic_ids',ba).setInt('num_removed_topics',ca).setEnum('category',t).getURI();new (c('AsyncRequest'))().setURI(ea).setRelativeTo(s).setHandler(function(fa){l=false;j[t].addTopics(fa.getPayload());}).send();}},onHideMenuUndoClicked:function r(s,t){var u=c('DOMQuery').find(s,"^._4_nl"),v=c('DOMQuery').find(u,"^._5my2 ._4_nm");c('CSS').hide(u);c('CSS').show(v);},hideSeeMoreLink:function r(s,t){var u=j[t].getCategoryItemInfo();if(u.hiddenTopicIds.length!==0)return;var v=c('Parent').bySelector(s,"._5my7"),w=c('DOMQuery').scry(v,"a._5my9");if(w&&w.length===1&&c('CSS').shown(w[0]))c('CSS').addClass(w[0],"_4_nk");}};f.exports=q;}),null);
__d('TrendingCategoryIcon',['cx','BanzaiLogger','CSS','TrendingEvent'],(function a(b,c,d,e,f,g,h){function i(j,k){'use strict';this.$TrendingCategoryIcon1=j;this.$TrendingCategoryIcon2=k.iconElement;this.$TrendingCategoryIcon4=k.unselectedClass;this.$TrendingCategoryIcon5=k.selectedClass;this.$TrendingCategoryIcon6=k.categoryId;this.$TrendingCategoryIcon7=k.categoryLoggingOffset;this.$TrendingCategoryIcon8=parseInt(k.queryId,10);this.$TrendingCategoryIcon9=k.source;}i.prototype.getRoot=function(){'use strict';return this.$TrendingCategoryIcon1;};i.prototype.getCategoryId=function(){'use strict';return this.$TrendingCategoryIcon6;};i.prototype.select=function(){'use strict';c('CSS').addClass(this.$TrendingCategoryIcon1,"_5nns");c('CSS').addClass(this.$TrendingCategoryIcon2,this.$TrendingCategoryIcon5);c('CSS').removeClass(this.$TrendingCategoryIcon2,this.$TrendingCategoryIcon4);this.$TrendingCategoryIcon1.setAttribute('aria-selected','true');this.$TrendingCategoryIcon1.focus();this.$TrendingCategoryIcon10();};i.prototype.unselect=function(){'use strict';c('CSS').removeClass(this.$TrendingCategoryIcon1,"_5nns");c('CSS').addClass(this.$TrendingCategoryIcon2,this.$TrendingCategoryIcon4);c('CSS').removeClass(this.$TrendingCategoryIcon2,this.$TrendingCategoryIcon5);this.$TrendingCategoryIcon1.setAttribute('aria-selected','false');};i.prototype.$TrendingCategoryIcon10=function(){'use strict';var j={trending_event:c('TrendingEvent').CATEGORY_HEADER_CLICKED,trending_location:this.$TrendingCategoryIcon9,trending_positions:[this.$TrendingCategoryIcon7],query_id:this.$TrendingCategoryIcon8,tagids:[]};c('BanzaiLogger').log('TrendingEventLoggerConfig',j);};f.exports=i;}),null);
__d('TrendingCategoryConstants',[],(function a(b,c,d,e,f,g){f.exports={ANIMATION_EVENTS:['webkitAnimationEnd','animationend','mozAnimationEnd','oAnimationEnd','MSAnimationEnd'],FAILSAFE_LIMIT:50,HEADLINE_TEXT_HEIGHT:30};}),null);
__d("XPubcontentTrendingCategoriesImpressionLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/trending\/categories\/log_impression\/",{topic_ids_by_position:{type:"IntToIntMap",required:true},source:{type:"String",required:true},query_id:{type:"Int",required:true}});}),null);
__d("XPubcontentTrendingCategoriesSeeMoreController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/trending\/categories\/see_more\/",{topic_ids_seen:{type:"IntVector",defaultValue:[]},num_topics_to_add:{type:"Int",required:true},num_removed_topics:{type:"Int",defaultValue:0},category:{type:"Enum",required:true,enumType:0}});}),null);
__d('TrendingCategoryList',['csx','cx','Arbiter','AsyncRequest','AsyncResponse','BanzaiODS','CSS','DOM','Event','Parent','TrendingCategoriesRHCHide','TrendingCategoryConstants','TrendingLocation','XPubcontentTrendingCategoriesImpressionLoggingController','XPubcontentTrendingCategoriesSeeMoreController','getElementText','getStyleProperty','setImmediate','tidyEvent'],(function a(b,c,d,e,f,g,h,i){function j(k,l,m,n,o){'use strict';this.$TrendingCategoryList1=k;this.$TrendingCategoryList2=l;this.$TrendingCategoryList3=n;this.$TrendingCategoryList4=o;this.$TrendingCategoryList5=m.category;this.$TrendingCategoryList6=m.rowsAfterSeeMore;this.$TrendingCategoryList9=m.source;this.$TrendingCategoryList7=m.queryId;this.$TrendingCategoryList8=false;this.$TrendingCategoryList10=m.truncateHeadlinesWithAttribution;this.$TrendingCategoryList11=m.suppressXOutReasons||false;c('TrendingCategoriesRHCHide').addCategoryList(this,this.$TrendingCategoryList5);if(m.useDelegateListener)this.$TrendingCategoryList12();this.$TrendingCategoryList13();if(this.$TrendingCategoryList10)this.$TrendingCategoryList14();}j.prototype.showItems=function(){'use strict';c('CSS').show(this.$TrendingCategoryList1);c('Arbiter').inform('netego_loaded');var k=this.getCategoryItemInfo();this.$TrendingCategoryList15(k.visibleTopicIds,k.visiblePositions,this.$TrendingCategoryList9);};j.prototype.hideItems=function(){'use strict';c('CSS').hide(this.$TrendingCategoryList1);};j.prototype.getHeight=function(){'use strict';return c('getStyleProperty')(this.$TrendingCategoryList1,'height');};j.prototype.getCategoryItemInfo=function(){'use strict';var k=[],l=[],m=[],n=[],o=[];c('DOM').scry(this.$TrendingCategoryList1,"._5my2").forEach(function(p){if(c('CSS').matchesSelector(p,"._5my9")||c('CSS').matchesSelector(p,"._5otw")||c('CSS').matchesSelector(p,"._4fr3")||c('CSS').matchesSelector(p,"._4fr4"))return;var q=Number(p.getAttribute('data-topicid')),r=Number(p.getAttribute('data-position'));if(c('CSS').matchesSelector(p,"._338c")){o.push(q);}else if(c('CSS').matchesSelector(p,"._5my1")){m.push(q);n.push(r);}else{k.push(q);l.push(r);}});return {visibleTopicIds:k,visiblePositions:l,hiddenTopicIds:m,hiddenPositions:n,removedTopicIds:o};};j.prototype.showExtraItem=function(){var k,l=this;'use strict';var m=c('DOM').scry(this.$TrendingCategoryList1,"._5my1");if(m.length===0)return;var n=Number.MAX_VALUE,o=null;m.forEach(function(p){var q=parseInt(p.getAttribute('data-position'),10);if(q<n){o=p;n=q;}});if(o!==null)(function(){var p=o;c('CSS').removeClass(p,"_5my1");c('CSS').addClass(p,"_4_ni");c('CSS').show(p);c('TrendingCategoryConstants').ANIMATION_EVENTS.forEach(function(event){p.addEventListener(event,function(){c('CSS').removeClass(p,"_4_ni");});});l.$TrendingCategoryList15([Number(p.getAttribute('data-topicid'))],[Number(p.getAttribute('data-position'))],c('TrendingLocation').WWW_HIDDEN_RHC_TRENDING);})();};j.prototype.removeItem=function(k){'use strict';c('CSS').addClass(k,"_338c");c('CSS').hide(k);};j.prototype.fetchExtraItems=function(){'use strict';if(this.$TrendingCategoryList8)return;this.$TrendingCategoryList8=true;if(this.$TrendingCategoryList2!==null)c('CSS').hide(this.$TrendingCategoryList2);var k=this.getCategoryItemInfo(),l=this.$TrendingCategoryList6-k.hiddenTopicIds.length;if(l<=0){this.$TrendingCategoryList16();c('Arbiter').inform('netego_loaded');return;}var m=c('DOM').scry(this.$TrendingCategoryList1,"._30_w")[0];if(m!=null)c('CSS').show(m);var n=k.visibleTopicIds.concat(k.hiddenTopicIds,k.removedTopicIds),o=c('XPubcontentTrendingCategoriesSeeMoreController').getURIBuilder().setIntVector('topic_ids_seen',n).setInt('num_topics_to_add',l).setInt('num_removed_topics',k.removedTopicIds.length).setEnum('category',this.$TrendingCategoryList5).getURI();new (c('AsyncRequest'))().setURI(o).setRelativeTo(this.$TrendingCategoryList1).setHandler(function(p){if(m!=null)c('CSS').hide(m);this.addTopics(p.getPayload());this.$TrendingCategoryList16();if(this.$TrendingCategoryList3)this.$TrendingCategoryList17();c('Arbiter').inform('netego_loaded');}.bind(this)).send();};j.prototype.addTopics=function(k){'use strict';if(k==null)return;this.$TrendingCategoryList18(k);if(this.$TrendingCategoryList10)c('setImmediate')(function(){return this.$TrendingCategoryList14();}.bind(this));};j.prototype.$TrendingCategoryList18=function(k){'use strict';var l=c('DOM').scry(this.$TrendingCategoryList1,"._5myl")[0];if(l!=null)c('DOM').appendContent(l,k);};j.prototype.$TrendingCategoryList12=function(){'use strict';c('tidyEvent')(c('Event').listen(this.$TrendingCategoryList1,'click',function(event){var k=event.target;if(!(k instanceof HTMLElement))return;if(c('CSS').matchesSelector(k,"._19_3")){var l=c('DOM').find(k,"._4v8h");c('TrendingCategoriesRHCHide').onHideClicked(l,this.$TrendingCategoryList5,this.$TrendingCategoryList11);return;}else if(c('CSS').matchesSelector(k,"._4v8h")){c('TrendingCategoriesRHCHide').onHideClicked(k,this.$TrendingCategoryList5,this.$TrendingCategoryList11);return;}var m=c('Parent').bySelector(k,"._2p3m");if(m){c('TrendingCategoriesRHCHide').onHideReasonClicked(m,this.$TrendingCategoryList5);return;}var n=c('Parent').bySelector(k,"._4_nn");if(n){c('TrendingCategoriesRHCHide').onHideMenuUndoClicked(n,this.$TrendingCategoryList5);return;}}.bind(this)));};j.prototype.$TrendingCategoryList17=function(){'use strict';c('CSS').hide(this.$TrendingCategoryList3);c('CSS').show(this.$TrendingCategoryList4);};j.prototype.$TrendingCategoryList13=function(){'use strict';if(this.$TrendingCategoryList2==null)return;c('tidyEvent')(c('Event').listen(this.$TrendingCategoryList2,'click',function(){c('CSS').hide(this.$TrendingCategoryList2);this.fetchExtraItems();}.bind(this)));};j.prototype.$TrendingCategoryList16=function(){'use strict';var k=c('DOM').scry(this.$TrendingCategoryList1,"._5my1");if(k.length===0)return;var l=Math.min(this.$TrendingCategoryList6,k.length),m=[],n=[];for(var o=0;o<l;o++){c('CSS').show(k[o]);c('CSS').removeClass(k[o],"_5my1");m.push(Number(k[o].getAttribute('data-topicid')));n.push(Number(k[o].getAttribute('data-position')));}this.$TrendingCategoryList15(m,n,c('TrendingLocation').WWW_HIDDEN_RHC_TRENDING);};j.prototype.$TrendingCategoryList15=function(k,l,m){'use strict';if(k.length===0)return;var n={};for(var o=0;o<k.length;o++)n[l[o]]=k[o];var p=c('XPubcontentTrendingCategoriesImpressionLoggingController').getURIBuilder().setIntToIntMap('topic_ids_by_position',n).setString('source',m).setInt('query_id',this.$TrendingCategoryList7).getURI();new (c('AsyncRequest'))(p).send();};j.prototype.$TrendingCategoryList14=function(){'use strict';var k=c('DOM').scry(this.$TrendingCategoryList1,"._5v9v");k.forEach(function(l){var m=0,n='\u2026';c('setImmediate')(function(){var o=c('DOM').scry(l,"._3-9y")[0];if(o==null)return;c('CSS').addClass(l,"_5ooc");while(this.$TrendingCategoryList19(l)){var p=c('getElementText')(o),q=p.split(' ');q=q.filter(function(s){return s!='';});q.pop();var r=q.join(' ');r+=n;c('DOM').setContent(o,r);m++;if(m>=c('TrendingCategoryConstants').FAILSAFE_LIMIT){c('BanzaiODS').bumpEntityKey('trending_rhc','truncate_failure');break;}}c('CSS').removeClass(l,"_5ooc");}.bind(this));}.bind(this));};j.prototype.$TrendingCategoryList19=function(k){'use strict';return k.scrollHeight>c('TrendingCategoryConstants').HEADLINE_TEXT_HEIGHT;};f.exports=j;}),null);
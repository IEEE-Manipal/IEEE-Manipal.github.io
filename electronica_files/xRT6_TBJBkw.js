if (self.CavalryLogger) { CavalryLogger.start_js(["zMHR2"]); }

__d("LEDExperimentEntryPoint",[],(function a(b,c,d,e,f,g){f.exports={LIKE:"like",ATTACHMENT:"attachment",NETEGO:"netego"};}),null);
__d("PageContextualRecommendationsTrigger",[],(function a(b,c,d,e,f,g){f.exports={DEBUG:"debug",FANNING:"fanning",NONE:"none",UFI:"ufi"};}),null);
__d("XEventRelatedEventsPivotController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/events\/async\/related_events_pivot\/",{event_id:{type:"Int",required:true},attachment_id:{type:"String"},trigger_action:{type:"String"}});}),null);
__d("XFeedAdsChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/feed\/ads_chaining\/",{actor_id:{type:"String",required:true},ft_id:{type:"String"},origin:{type:"String",required:true},ei:{type:"String",required:true},data_ownerid:{type:"String",required:true}});}),null);
__d("XLEDFollowUpFeedUnitController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/led\/async\/follow_up_feed_unit\/",{ft_id:{type:"String"},story_id:{type:"String"},place_id:{type:"String"},entry_point:{type:"Enum",required:true,enumType:1}});}),null);
__d("XPubcontentCommerceProductChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/related_product\/",{attachment_id:{type:"String",required:true},product_id:{type:"Int",required:true}});}),null);
__d("XPubcontentFeedChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/feed_chaining\/",{actor_id:{type:"String",required:true},content_id:{type:"String"},ft_id:{type:"String"},origin:{type:"String",required:true},is_home_request:{type:"Bool",defaultValue:false},trigger:{type:"String"},referrer:{type:"String"},is_sponsored:{type:"Bool",defaultValue:false}});}),null);
__d("XPubcontentFeedCommentChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/comment_chaining\/",{action_trigger:{type:"String",required:true},ft_id:{type:"String"}});}),null);
__d("XPubcontentGroupRelatedStoriesChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/group_related_stories\/",{post_id:{type:"Int",required:true},is_home_request:{type:"Bool",defaultValue:false}});}),null);
__d("XPubcontentInlineStoryPivotChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/inline_story_pivot_chaining\/",{origin:{type:"String",required:true},storyid:{type:"String"},ftid:{type:"String"}});}),null);
__d("XPubcontentPoliticalIssueChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/political_issue_chaining\/",{ft_id:{type:"String",required:true}});}),null);
__d("XPubcontentRelatedShareChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/related_share\/",{attachment_div_id:{type:"String",required:true},global_share_id:{type:"Int",required:true},video_div_id:{type:"String"},link_url:{type:"String"},qid:{type:"String"},mf_story_key:{type:"String"},share_id:{type:"String"},is_auto_expand:{type:"Bool",defaultValue:false}});}),null);
__d("XPubcontentRelatedVideoChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/related_video\/",{attachment_div_id:{type:"String",required:true},fbvideo_id:{type:"Int",required:true},qid:{type:"String"},mf_story_key:{type:"String"}});}),null);
__d("XPubcontentTopicChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/pubcontent\/topic_chaining\/",{ft_id:{type:"String",required:true}});}),null);
__d("XRelatedGamesChainingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/games\/async\/related_games\/",{attachment_div_id:{type:"String",required:true},app_id:{type:"Int",required:true}});}),null);
__d("XSearchRelatedPostsPivotController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("\/search\/async\/related_posts_pivot\/",{origin:{type:"String",required:true},content_id:{type:"String",required:true}});}),null);
__d('PubcontentFeedChainingControllerX',['csx','cx','AggregatedLinkComposerConfig','Arbiter','AsyncRequest','AttachmentIssueDiversityShareConstants','AttachmentRelatedShareConstants','ContextualThing','CSS','DataAttributeUtils','DOM','DOMQuery','FeedAdsChainingConfig','NavigationMessage','PageLikeConstants','PubcontentFeedChainingConfig','ContextualRecommendationsFeedChainingConfig','PubcontentRelatedShareChainingConfig','PubcontentPoliticalIssueChainingConfig','PubcontentTopicChainingConfig','RelatedEventsPivotChainingConfig','Run','SearchRelatedPostsPivotChainingConfig','StoryInlinePivotChainingConfig','SubscriptionsHandler','UFIFeedbackTargets','UFIUIEvents','URI','VideoChannelViewVariables','XEventRelatedEventsPivotController','XPubcontentCommerceProductChainingController','XFeedAdsChainingController','XPubcontentFeedChainingController','XPubcontentInlineStoryPivotChainingController','XPubcontentPoliticalIssueChainingController','XPubcontentRelatedShareChainingController','XPubcontentRelatedVideoChainingController','XPubcontentTopicChainingController','XPubcontentFeedCommentChainingController','XRelatedGamesChainingController','XSearchRelatedPostsPivotController','XPubcontentGroupRelatedStoriesChainingController','XLEDFollowUpFeedUnitController','LEDExperimentEntryPoint','PageContextualRecommendationsTrigger','cxodecode','getOrCreateDOMID'],(function a(b,c,d,e,f,g,h,i){var j='ei',k='ad_fan_page_action',l='ad_like_page_post_action',m='page_story_like_action',n='political_issue_story_article_click_action',o='related_share_article_click',p='related_product_click',q='related_share_video_click',r='related_share_video_view',s='page_share_like_action',t='topic_story_like_action',u='story_click_for_pivot_action',v='story_like_pivot_action',w='event_join',x='composer_publish_action',y='place_checkin_story_action',z='LIKE',aa='COMMENT',ba=c('VideoChannelViewVariables').channelPivots,ca=null,da=false,ea=null,fa=null;ga.init=function(ia){var ja=ia.isLazy,ka=ia.srs,la=ia.sdrs;'use strict';if(ka&&la){ea=c('cxodecode')(ka);fa=c('cxodecode')(la);}if(!ca)ca=new ga({isLazy:ja});if(!da){c('Run').onLeave(ga.cleanup);c('Arbiter').subscribe(c('NavigationMessage').NAVIGATION_BEGIN,ga.cleanup);da=true;}};ga.cleanup=function(){'use strict';if(ca){ca.cleanup();ca=null;}};function ga(ia){var ja=ia.isLazy;'use strict';this.$PubcontentFeedChainingControllerX1=c('PubcontentFeedChainingConfig');this.$PubcontentFeedChainingControllerX2=c('ContextualRecommendationsFeedChainingConfig');this.$PubcontentFeedChainingControllerX3=c('FeedAdsChainingConfig');this.$PubcontentFeedChainingControllerX4=c('PubcontentRelatedShareChainingConfig');this.$PubcontentFeedChainingControllerX5=c('PubcontentTopicChainingConfig');this.$PubcontentFeedChainingControllerX6=c('PubcontentPoliticalIssueChainingConfig');this.$PubcontentFeedChainingControllerX7=c('StoryInlinePivotChainingConfig');this.$PubcontentFeedChainingControllerX8=c('RelatedEventsPivotChainingConfig');this.$PubcontentFeedChainingControllerX9=c('SearchRelatedPostsPivotChainingConfig');this.$PubcontentFeedChainingControllerX10={};this.$PubcontentFeedChainingControllerX11=new (c('SubscriptionsHandler'))();this.$PubcontentFeedChainingControllerX11.addSubscriptions(this.$PubcontentFeedChainingControllerX12(c('PageLikeConstants').LIKED,ja,this.$PubcontentFeedChainingControllerX13.bind(this)),this.$PubcontentFeedChainingControllerX12(c('UFIUIEvents').ActionLinkLike,ja,this.$PubcontentFeedChainingControllerX14.bind(this)),this.$PubcontentFeedChainingControllerX12(c('UFIUIEvents').ReactionButtonClicked,ja,this.$PubcontentFeedChainingControllerX14.bind(this)),this.$PubcontentFeedChainingControllerX12(c('UFIUIEvents').Comment,ja,this.$PubcontentFeedChainingControllerX15.bind(this)),this.$PubcontentFeedChainingControllerX12('composer/publish',ja,this.$PubcontentFeedChainingControllerX16.bind(this)),this.$PubcontentFeedChainingControllerX12('LitestandComposer/publish',ja,this.$PubcontentFeedChainingControllerX16.bind(this)),this.$PubcontentFeedChainingControllerX12(c('AttachmentRelatedShareConstants').ARTICLE_CLICK,ja,this.$PubcontentFeedChainingControllerX17.bind(this)),this.$PubcontentFeedChainingControllerX12(c('AttachmentIssueDiversityShareConstants').ARTICLE_CLICK,ja,this.$PubcontentFeedChainingControllerX18.bind(this)),this.$PubcontentFeedChainingControllerX12(c('AttachmentRelatedShareConstants').VIDEO_CLICK,ja,this.$PubcontentFeedChainingControllerX19(this.$PubcontentFeedChainingControllerX20.bind(this),c('LEDExperimentEntryPoint').ATTACHMENT)),this.$PubcontentFeedChainingControllerX12(c('AttachmentRelatedShareConstants').FBVIDEO_VIEW,ja,this.$PubcontentFeedChainingControllerX19(this.$PubcontentFeedChainingControllerX21.bind(this),c('LEDExperimentEntryPoint').ATTACHMENT)),this.$PubcontentFeedChainingControllerX12(c('AttachmentRelatedShareConstants').FBVIDEO_CLICK,ja,this.$PubcontentFeedChainingControllerX19(this.$PubcontentFeedChainingControllerX21.bind(this),c('LEDExperimentEntryPoint').ATTACHMENT)),this.$PubcontentFeedChainingControllerX12(c('AttachmentRelatedShareConstants').GAME_CLICK,ja,this.$PubcontentFeedChainingControllerX22.bind(this)),this.$PubcontentFeedChainingControllerX12(c('AttachmentRelatedShareConstants').PHOTO_CLICK,ja,this.$PubcontentFeedChainingControllerX19(this.$PubcontentFeedChainingControllerX23.bind(this),c('LEDExperimentEntryPoint').ATTACHMENT)),this.$PubcontentFeedChainingControllerX12(c('AttachmentRelatedShareConstants').EVENT_JOIN,ja,this.$PubcontentFeedChainingControllerX24.bind(this)),this.$PubcontentFeedChainingControllerX12(c('AttachmentRelatedShareConstants').PRODUCT_CLICK,ja,this.$PubcontentFeedChainingControllerX25.bind(this)),this.$PubcontentFeedChainingControllerX12(c('AttachmentRelatedShareConstants').MAP_CLICK,ja,this.$PubcontentFeedChainingControllerX26.bind(this)),this.$PubcontentFeedChainingControllerX12(c('AttachmentRelatedShareConstants').ACTION_BUTTON_CLICK,ja,this.$PubcontentFeedChainingControllerX27.bind(this)));}ga.prototype.$PubcontentFeedChainingControllerX12=function(event,ia,ja){'use strict';var ka=ia?[event,event+'.lazy']:[event];return c('Arbiter').subscribe(ka,ja);};ga.prototype.cleanup=function(){'use strict';this.$PubcontentFeedChainingControllerX11&&this.$PubcontentFeedChainingControllerX11.release();this.$PubcontentFeedChainingControllerX11=null;};ga.getAdClientTokenIndex=function(){'use strict';return j;};ga.prototype.$PubcontentFeedChainingControllerX13=function(ia,ja){'use strict';var ka=this.findAdClientToken(ja.target);if(ka){this.$PubcontentFeedChainingControllerX28(ja.target,{origin:k,actor_id:ja.profile_id,client_token:ka});}else this.$PubcontentFeedChainingControllerX29(ja.target,{origin:ja.origin,actor_id:ja.profile_id,trigger:c('PageContextualRecommendationsTrigger').FANNING,chaining_type:'contextual_recommendations'});};ga.prototype.$PubcontentFeedChainingControllerX14=function(ia,ja){'use strict';if(!ja.ft_id||!ja.target||!ja.reaction_type)return;if(!this.$PubcontentFeedChainingControllerX30(this.findStory(ja.target))||this.$PubcontentFeedChainingControllerX31(this.findStory(ja.target)))return;c('UFIFeedbackTargets').getFeedbackTarget(ja.ft_id,function(ka,la){var ma=this.findAdClientToken(ka);if(ma&&la.isshare){this.$PubcontentFeedChainingControllerX28(ka,{actor_id:la.actorid,origin:l,ft_id:la.entidentifier,client_token:ma});}else if(la.isownerpage){var na=la.isshare?s:m;this.$PubcontentFeedChainingControllerX29(ka,{actor_id:la.actorid,content_id:la.entidentifier,ft_id:la.entidentifier,origin:na,trigger:c('PageContextualRecommendationsTrigger').UFI,chaining_type:'contextual_recommendations'});}else if(la.grouporeventid){if(this.shouldPuntGroupChaining(ka))return;this.$PubcontentFeedChainingControllerX32(ka,{post_id:la.entidentifier,origin:z});}else if(la.isshare){this.$PubcontentFeedChainingControllerX29(ka,{actor_id:la.actorid,content_id:la.entidentifier,ft_id:la.entidentifier,origin:s,trigger:c('PageContextualRecommendationsTrigger').UFI,chaining_type:'contextual_recommendations'});}else if(la.isplacecheckin){this.$PubcontentFeedChainingControllerX33(ka,{ft_id:la.entidentifier,origin:y},c('LEDExperimentEntryPoint').LIKE);}else{var oa=this.$PubcontentFeedChainingControllerX34(ka,{origin:v,ft_id:la.entidentifier});if(!oa)this.$PubcontentFeedChainingControllerX35(ka,{origin:t,ft_id:la.entidentifier});}}.bind(this,ja.target));};ga.prototype.$PubcontentFeedChainingControllerX15=function(ia,ja){'use strict';if(!ja.ft_id||!ja.target)return;if(!this.$PubcontentFeedChainingControllerX30(this.findStory(ja.target))||this.$PubcontentFeedChainingControllerX31(this.findStory(ja.target)))return;c('UFIFeedbackTargets').getFeedbackTarget(ja.ft_id,function(ka,la){if(la.grouporeventid){if(this.shouldPuntGroupChaining(ka))return;this.$PubcontentFeedChainingControllerX36(ka,{origin:aa,event_id:la.grouporeventid});}else this.$PubcontentFeedChainingControllerX37(ja.target,{origin:o,action_trigger:aa,ft_id:la.entidentifier});}.bind(this,ja.target));};ga.prototype.$PubcontentFeedChainingControllerX34=function(ia,ja){'use strict';var ka=this.$PubcontentFeedChainingControllerX38(ia,ja);if(!ka)return false;var la=c('XPubcontentInlineStoryPivotChainingController').getURIBuilder().setString('origin',ja.origin);if(ja.story_id)la.setString('storyid',String(ja.story_id));if(ja.ft_id)la.setString('ftid',String(ja.ft_id));new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX39.bind(this,ka.story.id)).setRelativeTo(ka.chainingWrapper).setURI(la.getURI()).setAllowCrossPageTransition(true).send();return true;};ga.prototype.$PubcontentFeedChainingControllerX35=function(ia,ja){'use strict';var ka=this.$PubcontentFeedChainingControllerX38(ia,ja);if(!ka||!this.$PubcontentFeedChainingControllerX40())return;var la=c('XPubcontentTopicChainingController').getURIBuilder().setString('ft_id',ja.ft_id);new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX39.bind(this,ka.story.id)).setRelativeTo(ka.chainingWrapper).setURI(la.getURI()).setAllowCrossPageTransition(true).send();return;};ga.prototype.$PubcontentFeedChainingControllerX41=function(ia,ja,ka){'use strict';var la=this.$PubcontentFeedChainingControllerX38(ia,ja);if(!la){ka&&ka();return;}var ma=c('XPubcontentPoliticalIssueChainingController').getURIBuilder().setString('ft_id',ja.ft_id);new (c('AsyncRequest'))().setErrorHandler(function(){this.$PubcontentFeedChainingControllerX39(la.story.id);ka&&ka();}.bind(this)).setRelativeTo(la.chainingWrapper).setURI(ma.getURI()).setAllowCrossPageTransition(true).setHandler(function(na){if(!na.payload.is_chained){this.$PubcontentFeedChainingControllerX39(la.story.id);ka&&ka();}}.bind(this)).send();return;};ga.prototype.$PubcontentFeedChainingControllerX23=function(ia,ja){'use strict';var ka=this;ka.$PubcontentFeedChainingControllerX34(ja.attachment,{origin:u,story_id:ja.storyid});};ga.prototype.$PubcontentFeedChainingControllerX17=function(ia,ja){'use strict';this.$PubcontentFeedChainingControllerX42(ia,ja,true);};ga.prototype.$PubcontentFeedChainingControllerX18=function(ia,ja){'use strict';this.$PubcontentFeedChainingControllerX42(ia,ja,false);};ga.prototype.$PubcontentFeedChainingControllerX42=function(ia,ja,ka){'use strict';if(c('AggregatedLinkComposerConfig').no_chained_related_stories==='true')return;var la=this,ma=this.findStory(ja.attachment),na=c('DOMQuery').scry(c('DOMQuery').getRootElement(),'#initial_browse_result').length>0;if(na)return;var oa;if(ja.is_right_click){oa=0;}else oa=c('AttachmentRelatedShareConstants').EVENT_DELAY;setTimeout(function(){if(ma){var pa=la.findAttachment(ma);if(pa)ja.attachment=pa;}ja.ft_id=la.findFeedbackTargetId(ma);la.$PubcontentFeedChainingControllerX41(ja.attachment,{origin:n,ft_id:ja.ft_id},function(){if(!ka)return;ja.origin=o;la.$PubcontentFeedChainingControllerX43(ja.attachment,ja);});},oa);};ga.prototype.$PubcontentFeedChainingControllerX20=function(ia,ja){'use strict';if(!this.$PubcontentFeedChainingControllerX40())return;ja.origin=q;var ka=this,la=this.findStory(ja.attachment);setTimeout(function(){if(la){var ma=ka.findAttachment(la);if(ma)ja.attachment=ma;}ka.$PubcontentFeedChainingControllerX43(ja.attachment,ja);},c('AttachmentRelatedShareConstants').EVENT_DELAY);};ga.prototype.$PubcontentFeedChainingControllerX21=function(ia,ja){'use strict';if(!this.$PubcontentFeedChainingControllerX40())return;ja.origin=ia.indexOf(c('AttachmentRelatedShareConstants').FBVIDEO_VIEW)===-1?q:r;var ka=this,la=this.findStory(ja.attachment);setTimeout(function(){if(la){var ma=ka.findAttachment(la);if(ma)ja.attachment=ma;}ka.$PubcontentFeedChainingControllerX43(ja.attachment,ja);},c('AttachmentRelatedShareConstants').EVENT_DELAY);};ga.prototype.$PubcontentFeedChainingControllerX22=function(ia,ja){'use strict';var ka=this,la=this.findStory(ja.attachment);setTimeout(function(){if(la)var ma=ka.findContainer(la);ka.$PubcontentFeedChainingControllerX44(la,ja.global_share_id,c('getOrCreateDOMID')(ma));},c('AttachmentRelatedShareConstants').EVENT_DELAY);};ga.prototype.$PubcontentFeedChainingControllerX24=function(ia,ja){'use strict';var ka=this.findStory(ja.attachment);if(ka){var la=this.findAttachment(ka);if(la)ja.attachment=la;}this.$PubcontentFeedChainingControllerX36(ja.attachment,{origin:w,event_id:ja.event_id});};ga.prototype.$PubcontentFeedChainingControllerX25=function(ia,ja){'use strict';ja.origin=p;var ka=this.findStory(ja.attachment);if(ka){var la=this.findAttachment(ka);if(la)ja.attachment=la;}this.$PubcontentFeedChainingControllerX45(ja.attachment,ja);};ga.prototype.$PubcontentFeedChainingControllerX26=function(ia,ja){'use strict';this.$PubcontentFeedChainingControllerX33(ja.attachment,{place_id:ja.place_id,story_id:ja.story_id,origin:y},c('LEDExperimentEntryPoint').ATTACHMENT);};ga.prototype.$PubcontentFeedChainingControllerX27=function(ia,ja){'use strict';var ka=this.findStory(ja.button);if(!ka)return;this.$PubcontentFeedChainingControllerX33(ka,{place_id:ja.place_id,origin:y},c('LEDExperimentEntryPoint').ATTACHMENT);};ga.prototype.$PubcontentFeedChainingControllerX16=function(ia,ja){'use strict';var ka=this;setTimeout(function(){ka.$PubcontentFeedChainingControllerX46(ja.markup.firstChild,{origin:x,content_id:ja.content_id});},this.$PubcontentFeedChainingControllerX9.composer_publish_action);};ga.prototype.$PubcontentFeedChainingControllerX47=function(ia){'use strict';return !!(ia&&ia.id&&!c('CSS').matchesSelector(ia,"._sf6")&&!(ia.id in this.$PubcontentFeedChainingControllerX10));};ga.prototype.$PubcontentFeedChainingControllerX48=function(ia){'use strict';if(!ia)return false;if(ia.origin in this.$PubcontentFeedChainingControllerX1||ia.origin in this.$PubcontentFeedChainingControllerX2||ia.origin in this.$PubcontentFeedChainingControllerX4||ia.origin in this.$PubcontentFeedChainingControllerX3||ia.origin in this.$PubcontentFeedChainingControllerX7||ia.origin in this.$PubcontentFeedChainingControllerX8||ia.origin in this.$PubcontentFeedChainingControllerX9||ia.origin in this.$PubcontentFeedChainingControllerX5||ia.origin in this.$PubcontentFeedChainingControllerX6||ia.origin===p||ia.origin===r||ia.origin===y||ia.origin===z||ia.origin===aa)return true;return false;};ga.prototype.$PubcontentFeedChainingControllerX49=function(ia){'use strict';this.$PubcontentFeedChainingControllerX10[ia]=true;};ga.prototype.$PubcontentFeedChainingControllerX39=function(ia){'use strict';delete this.$PubcontentFeedChainingControllerX10[ia];};ga.prototype.$PubcontentFeedChainingControllerX30=function(ia){'use strict';if(!ia)return false;var ja="_3lkn",ka=ia.nextSibling,la=true;if(ka&&ka.firstChild){var ma=ka.firstChild;la=!(ma.hasChildNodes()&&c('CSS').hasClass(ma,ja));}if(!la)return false;var na=ia.children[0],oa=ia.children[1],pa="_4_ck";if(na&&c('CSS').hasClass(na,pa)||oa&&c('CSS').hasClass(oa,pa))return false;return true;};ga.prototype.$PubcontentFeedChainingControllerX31=function(ia){'use strict';if(!ia)return true;var ja=c('DOM').scry(ia,"._1xwr");if(ja.length)return true;return false;};ga.prototype.$PubcontentFeedChainingControllerX38=function(ia,ja){'use strict';var ka=this.findStory(ia);if(!this.$PubcontentFeedChainingControllerX47(ka))return null;if(!this.$PubcontentFeedChainingControllerX48(ja))return null;this.$PubcontentFeedChainingControllerX49(ka.id);if(ha(ka)&&ja.chaining_type!=='contextual_recommendations')return null;var la;if(!ja.continued_chaining){la=this.findContainer(ka);if(!la)return null;var ma=c('DOM').create('div'),na=c('DOM').appendContent(la,ma);if(na.length!==1)return null;}else{la=ka;ma=c('DOM').create('div');na=c('DOM').insertAfter(la,ma);c('DOM').remove(la);if(na.length!==1)return null;}if(ja.is_auto_expand){return {chainingWrapper:na[0],story:ka,is_auto_expand:ja.is_auto_expand};}else return {chainingWrapper:na[0],story:ka};};ga.prototype.$PubcontentFeedChainingControllerX28=function(ia,ja){'use strict';var ka=this.$PubcontentFeedChainingControllerX38(ia,ja);if(!ka)return false;var la=this.findStreamRoot(ka.story);if(!la)return false;var ma=la.getAttribute('id'),na=c('XFeedAdsChainingController').getURIBuilder().setString('actor_id',ja.actor_id).setString('origin',ja.origin).setString('ei',ja.client_token).setString('data_ownerid',ma);if(ja.ft_id)na.setString('ft_id',ja.ft_id);new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX39.bind(this,ka.story.id)).setRelativeTo(ka.chainingWrapper).setURI(na.getURI()).setAllowCrossPageTransition(true).send();return true;};ga.prototype.$PubcontentFeedChainingControllerX43=function(ia,ja){'use strict';if(!this.$PubcontentFeedChainingControllerX30(this.findStory(ia)))return false;var ka=this.$PubcontentFeedChainingControllerX38(ia,ja);if(!ka)return false;c('CSS').addClass(ka.chainingWrapper,"_3lkn");var la=null;if(ja.fbvideo_id){la=c('XPubcontentRelatedVideoChainingController').getURIBuilder();la.setInt('fbvideo_id',ja.fbvideo_id);}else{la=c('XPubcontentRelatedShareChainingController').getURIBuilder();la.setInt('global_share_id',ja.global_share_id);}la.setString('attachment_div_id',c('getOrCreateDOMID')(ja.attachment));if(ja.link_url)la.setString('link_url',ja.link_url);if(ja.video_div_id)la.setString('video_div_id',ja.video_div_id);if(ja.share_id)la.setString('share_id',ja.share_id);var ma=JSON.parse(c('DataAttributeUtils').getDataFt(ka.story))||{};if('qid' in ma&&'mf_story_key' in ma){la.setString('qid',ma.qid);la.setString('mf_story_key',ma.mf_story_key);}if(ja.is_auto_expand){this.$PubcontentFeedChainingControllerX39(ka.story.id);la.setBool('is_auto_expand',ja.is_auto_expand);}var na=new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX39.bind(this,ka.story.id)).setRelativeTo(ka.chainingWrapper).setAllowCrossPageTransition(true).setURI(la.getURI());ma&&na.setData(ma);na.send();return true;};ga.prototype.$PubcontentFeedChainingControllerX44=function(ia,ja,ka){'use strict';if(!this.$PubcontentFeedChainingControllerX47(ia))return null;this.$PubcontentFeedChainingControllerX49(ia.id);var la=c('XRelatedGamesChainingController').getURIBuilder().setInt('app_id',ja).setString('attachment_div_id',ka);new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX39.bind(this,ia.id)).setURI(la.getURI()).setAllowCrossPageTransition(true).send();return true;};ga.prototype.$PubcontentFeedChainingControllerX29=function(ia,ja){'use strict';var ka=this.$PubcontentFeedChainingControllerX38(ia,ja);if(!ka)return false;var la=this.findStory(ia),ma=c('XPubcontentFeedChainingController').getURIBuilder().setString('actor_id',ja.actor_id).setString('origin',ja.origin).setString('referrer',ja.referrer).setString('trigger',ja.trigger).setBool('is_home_request',this.$PubcontentFeedChainingControllerX40()).setBool('is_sponsored',ha(la));if(ja.ft_id)ma.setString('ft_id',ja.ft_id);if(ja.content_id)ma.setString('content_id',ja.content_id);new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX39.bind(this,ka.story.id)).setRelativeTo(ka.chainingWrapper).setURI(ma.getURI()).setAllowCrossPageTransition(true).send();return true;};ga.prototype.$PubcontentFeedChainingControllerX36=function(ia,ja){'use strict';var ka=this.$PubcontentFeedChainingControllerX38(ia,ja);if(!ka)return false;var la=c('XEventRelatedEventsPivotController').getURIBuilder().setInt('event_id',ja.event_id).setString('attachment_id',c('getOrCreateDOMID')(ia)).setString('trigger_action',ja.origin).getURI();new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX39.bind(this,ka.story.id)).setRelativeTo(ka.chainingWrapper).setURI(la).setAllowCrossPageTransition(true).send();return true;};ga.prototype.$PubcontentFeedChainingControllerX19=function(ia,ja){'use strict';return function(ka,la){var ma={origin:y};if(la.storyid){ma.story_id=la.storyid;}else{var na=this.findStory(la.attachment);if(!na)return ia;ma.ft_id=this.findFeedbackTargetId(na);}return this.$PubcontentFeedChainingControllerX33(la.attachment,ma,ja,function(){return ia(ka,la);});}.bind(this);};ga.prototype.$PubcontentFeedChainingControllerX33=function(ia,ja,ka,la){'use strict';var ma=c('XLEDFollowUpFeedUnitController').getURIBuilder().setEnum('entry_point',ka);if(ja.ft_id)ma=ma.setString('ft_id',ja.ft_id);if(ja.story_id)ma=ma.setString('story_id',ja.story_id);if(ja.place_id)ma=ma.setString('place_id',String(ja.place_id));var na=this.$PubcontentFeedChainingControllerX38(ia,ja);if(!na){la&&la();return;}new (c('AsyncRequest'))().setErrorHandler(function(){this.$PubcontentFeedChainingControllerX39(na.story.id);la&&la();}.bind(this)).setHandler(function(oa){if(!oa.payload.is_chained){this.$PubcontentFeedChainingControllerX39(na.story.id);la&&la();}}.bind(this)).setRelativeTo(na.chainingWrapper).setURI(ma.getURI()).setAllowCrossPageTransition(true).send();};ga.prototype.$PubcontentFeedChainingControllerX45=function(ia,ja){'use strict';var ka=this.$PubcontentFeedChainingControllerX38(ia,ja);if(!ka)return false;var la=c('XPubcontentCommerceProductChainingController').getURIBuilder().setString('attachment_id',c('getOrCreateDOMID')(ia)).setInt('product_id',ja.product_id).getURI();new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX39.bind(this,ka.story.id)).setRelativeTo(ka.chainingWrapper).setURI(la).setAllowCrossPageTransition(true).send();return true;};ga.prototype.$PubcontentFeedChainingControllerX46=function(ia,ja){'use strict';var ka=this.$PubcontentFeedChainingControllerX38(ia,ja);if(!ka)return false;var la=c('XSearchRelatedPostsPivotController').getURIBuilder().setString('origin',ja.origin).setString('content_id',String(ja.content_id));new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX39.bind(this,ka.story.id)).setRelativeTo(ka.chainingWrapper).setURI(la.getURI()).setAllowCrossPageTransition(true).send();return true;};ga.prototype.$PubcontentFeedChainingControllerX37=function(ia,ja){'use strict';var ka=this.$PubcontentFeedChainingControllerX38(ia,ja);if(!ka)return false;var la=c('XPubcontentFeedCommentChainingController').getURIBuilder().setString('action_trigger',String(ja.action_trigger));if(ja.ft_id)la.setString('ft_id',ja.ft_id);new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX39.bind(this,ka.story.id)).setRelativeTo(ka.chainingWrapper).setURI(la.getURI()).setAllowCrossPageTransition(true).send();return true;};ga.prototype.$PubcontentFeedChainingControllerX32=function(ia,ja){'use strict';var ka=this.$PubcontentFeedChainingControllerX38(ia,ja);if(!ka)return false;var la=c('XPubcontentGroupRelatedStoriesChainingController').getURIBuilder().setInt('post_id',ja.post_id).setBool('is_home_request',this.$PubcontentFeedChainingControllerX40()).getURI();new (c('AsyncRequest'))().setErrorHandler(this.$PubcontentFeedChainingControllerX39.bind(this,ka.story.id)).setRelativeTo(ka.chainingWrapper).setURI(la).setAllowCrossPageTransition(true).send();return true;};ga.prototype.findStory=function(ia){'use strict';var ja="^div._4-u2",ka=c('DOM').scry(ia,ja);return ka.length===1?ka[0]:null;};ga.prototype.findFeedbackTargetId=function(ia){'use strict';if(ba){var ja=c('DOMQuery').scry(ia,"input[name='ft_ent_identifier']");if(!ja)return null;return ja[0].value;}else{var ka=c('DOMQuery').find(ia,"input[name='ft_ent_identifier']");if(!ka)return null;return ka.value;}};ga.prototype.findAttachment=function(ia){'use strict';var ja="div._6m2",ka="div.iframeEmbed",la=c('DOM').scry(ia,ja)[0]||c('DOM').scry(ia,ka)[0];return la;};ga.prototype.findContainer=function(ia){'use strict';var ja=c('DOM').create('div'),ka=c('DOM').insertAfter(ia,ja);c('ContextualThing').register(ja,ia);return ka.length>=1?ka[0]:null;};ga.prototype.findStreamRoot=function(ia){'use strict';var ja="^div._4ikz";return c('DOM').scry(ia,ja)[0];};ga.prototype.findAdClientToken=function(ia){'use strict';var ja=this.findStory(ia);if(!ja)return null;var ka=c('DataAttributeUtils').getDataFt(ja);if(!ka)return null;var la=JSON.parse(ka);return la[ga.getAdClientTokenIndex()];};ga.prototype.shouldPuntGroupChaining=function(ia){'use strict';var ja="^._4ruh";return c('DOM').scry(ia,ja).length>=1;};ga.prototype.$PubcontentFeedChainingControllerX40=function(){'use strict';var ia=c('URI').getRequestURI(false);return ia.getPath()==='/'||ia.getPath()==='/home.php';};function ha(ia){if(ea&&fa){return (c('DOM').scry(ia,ea).length>0&&c('DOM').scry(ia,fa).length===0);}else return (c('DOM').scry(ia,"._5paw").length>0&&c('DOM').scry(ia,"._14zs").length===0);}f.exports=ga;}),null);